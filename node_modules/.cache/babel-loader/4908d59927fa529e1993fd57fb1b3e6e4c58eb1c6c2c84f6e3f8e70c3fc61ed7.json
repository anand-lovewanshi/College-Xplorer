{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,Link,useNavigate}from\"react-router-dom\";// ✅ REMOVED: The static import of collegedata.js is gone.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CollegeDetailPage=()=>{const{stream,collegeName:encodedCollegeName}=useParams();const navigate=useNavigate();const collegeName=decodeURIComponent(encodedCollegeName);const[college,setCollege]=useState(null);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// ✅ SIMPLIFIED: This function now only fetches from your API.\nconst fetchCollege=async()=>{try{setIsLoading(true);const response=await fetch('http://localhost:5000/api/colleges');if(!response.ok){throw new Error('Failed to fetch data from the server.');}const allColleges=await response.json();// Find the specific college from the list fetched from the database\nconst foundCollege=allColleges.find(c=>c.name===collegeName&&c.stream===stream);if(foundCollege){setCollege(foundCollege);}else{setError('College not found.');}}catch(err){setError(err.message);console.error(\"Error fetching college details:\",err);}finally{setIsLoading(false);}};fetchCollege();},[stream,collegeName]);// Dependencies remain the same\nconst handleApplyClick=()=>{if(college){navigate('/enrollnow',{state:{collegeName:college.name}});}};const formatStreamTitle=slug=>{if(!slug)return'';return slug.replace(/-/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());};// --- The rest of your component's JSX remains the same ---\n// (Loading, error, and display logic is unchanged)\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"college-detail-container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading details...\"})});}if(error||!college){return/*#__PURE__*/_jsxs(\"div\",{className:\"college-detail-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:error||'College not found.'}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"back-link\",children:\"\\u2190 Back to Home\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"college-detail-container\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/colleges/\".concat(stream),className:\"back-link\",children:[\"\\u2190 Back to \",formatStreamTitle(stream),\" Colleges\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"college-detail-card\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"college-detail-title\",children:college.name}),/*#__PURE__*/_jsx(\"p\",{className:\"college-detail-city\",children:college.city}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:college.description||\"No description available.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Estimated Fees\"}),/*#__PURE__*/_jsx(\"p\",{children:college.fees||\"Not available.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Courses Offered\"}),/*#__PURE__*/_jsx(\"p\",{children:college.courses&&college.courses.length>0?college.courses.join(\", \"):\"Not available.\"})]}),college.detailedFeesUrl&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Detailed Fee Structure\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"http://localhost:5000\".concat(college.detailedFeesUrl),target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn-pdf-download\",children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",viewBox:\"0 0 16 16\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"})]}),\"Download Fee Structure (PDF)\"]})]}),college.website&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Website\"}),/*#__PURE__*/_jsx(\"a\",{href:college.website,target:\"_blank\",rel:\"noopener noreferrer\",className:\"website-link\",children:\"Visit Website\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"college-detail-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-apply-detail\",onClick:handleApplyClick,children:\"Apply Now\"})})]})]});};export default CollegeDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","CollegeDetailPage","stream","collegeName","encodedCollegeName","navigate","decodeURIComponent","college","setCollege","isLoading","setIsLoading","error","setError","fetchCollege","response","fetch","ok","Error","allColleges","json","foundCollege","find","c","name","err","message","console","handleApplyClick","state","formatStreamTitle","slug","replace","l","toUpperCase","className","children","to","concat","city","description","fees","courses","length","join","detailedFeesUrl","href","target","rel","xmlns","width","height","fill","viewBox","d","website","onClick"],"sources":["D:/CollegeWeb/collegexplorer-app/src/components/CollegeDetailPage.jsx"],"sourcesContent":["\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\n\r\n// ✅ REMOVED: The static import of collegedata.js is gone.\r\n\r\nconst CollegeDetailPage = () => {\r\n  const { stream, collegeName: encodedCollegeName } = useParams();\r\n  const navigate = useNavigate();\r\n  const collegeName = decodeURIComponent(encodedCollegeName);\r\n\r\n  const [college, setCollege] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // ✅ SIMPLIFIED: This function now only fetches from your API.\r\n    const fetchCollege = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n\r\n        const response = await fetch('http://localhost:5000/api/colleges');\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch data from the server.');\r\n        }\r\n        \r\n        const allColleges = await response.json();\r\n        \r\n        // Find the specific college from the list fetched from the database\r\n        const foundCollege = allColleges.find(\r\n          c => c.name === collegeName && c.stream === stream\r\n        );\r\n\r\n        if (foundCollege) {\r\n          setCollege(foundCollege);\r\n        } else {\r\n          setError('College not found.');\r\n        }\r\n\r\n      } catch (err) {\r\n        setError(err.message);\r\n        console.error(\"Error fetching college details:\", err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCollege();\r\n  }, [stream, collegeName]); // Dependencies remain the same\r\n\r\n  const handleApplyClick = () => {\r\n    if (college) {\r\n      navigate('/enrollnow', { state: { collegeName: college.name } });\r\n    }\r\n  };\r\n\r\n  const formatStreamTitle = (slug) => {\r\n    if (!slug) return '';\r\n    return slug.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\r\n  };\r\n  \r\n  // --- The rest of your component's JSX remains the same ---\r\n  // (Loading, error, and display logic is unchanged)\r\n\r\n  if (isLoading) {\r\n    return <div className=\"college-detail-container\"><p>Loading details...</p></div>;\r\n  }\r\n\r\n  if (error || !college) {\r\n    return (\r\n      <div className=\"college-detail-container\">\r\n        <p>{error || 'College not found.'}</p>\r\n        <Link to=\"/\" className=\"back-link\">&larr; Back to Home</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"college-detail-container\">\r\n      <Link to={`/colleges/${stream}`} className=\"back-link\">&larr; Back to {formatStreamTitle(stream)} Colleges</Link>\r\n      <div className=\"college-detail-card\">\r\n        <h1 className=\"college-detail-title\">{college.name}</h1>\r\n        <p className=\"college-detail-city\">{college.city}</p>\r\n        \r\n        <div className=\"detail-section\">\r\n          <h3>Description</h3>\r\n          <p>{college.description || \"No description available.\"}</p>\r\n        </div>\r\n\r\n        <div className=\"detail-section\">\r\n          <h3>Estimated Fees</h3>\r\n          <p>{college.fees || \"Not available.\"}</p>\r\n        </div>\r\n\r\n        <div className=\"detail-section\">\r\n          <h3>Courses Offered</h3>\r\n          <p>{college.courses && college.courses.length > 0 ? college.courses.join(\", \") : \"Not available.\"}</p>\r\n        </div>\r\n        \r\n        {college.detailedFeesUrl && (\r\n          <div className=\"detail-section\">\r\n            <h3>Detailed Fee Structure</h3>\r\n            <a \r\n              href={`http://localhost:5000${college.detailedFeesUrl}`} \r\n              target=\"_blank\" \r\n              rel=\"noopener noreferrer\" \r\n              className=\"btn-pdf-download\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"/>\r\n                <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"/>\r\n              </svg>\r\n              Download Fee Structure (PDF)\r\n            </a>\r\n          </div>\r\n        )}\r\n\r\n        {college.website && (\r\n          <div className=\"detail-section\">\r\n            <h3>Website</h3>\r\n            <a href={college.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"website-link\">\r\n              Visit Website\r\n            </a>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"college-detail-actions\">\r\n            <button className=\"btn-apply-detail\" onClick={handleApplyClick}>\r\n                Apply Now\r\n            </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollegeDetailPage;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}