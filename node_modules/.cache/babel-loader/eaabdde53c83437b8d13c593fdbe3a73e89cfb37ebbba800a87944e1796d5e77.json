{"ast":null,"code":"// import React, { useState, useEffect } from \"react\";\n// import { useParams, useNavigate } from \"react-router-dom\";\n// import { collegeData as staticCollegeData } from \"../data/collegedata.js\"; // Import static data\n// const CollegeListPage = () => {\n//   const { stream } = useParams();\n//   const navigate = useNavigate();\n//   // State to hold combined list of colleges\n//   const [colleges, setColleges] = useState([]);\n//   const [isLoading, setIsLoading] = useState(true);\n//   const [error, setError] = useState(null);\n//   useEffect(() => {\n//     const fetchAllColleges = async () => {\n//       try {\n//         setIsLoading(true);\n//         // --- Fetch from both API and static file ---\n//         const apiResponsePromise = fetch('http://localhost:5000/api/colleges');\n//         const staticDataPromise = Promise.resolve(staticCollegeData);\n//         const [apiResult, staticResult] = await Promise.allSettled([\n//           apiResponsePromise.then(res => {\n//             if (!res.ok) throw new Error('Network response was not ok');\n//             return res.json();\n//           }),\n//           staticDataPromise\n//         ]);\n//         let apiColleges = [];\n//         if (apiResult.status === 'fulfilled') {\n//           apiColleges = apiResult.value;\n//         } else {\n//           console.error(\"Failed to fetch from API:\", apiResult.reason);\n//           // You might want to set a partial error state here\n//         }\n//         const staticColleges = staticResult.value || {};\n//         // --- Merge and de-duplicate data ---\n//         const combinedData = {};\n//         // 1. Add static data first\n//         if (staticColleges[stream]) {\n//             combinedData[stream] = [...staticColleges[stream]];\n//         } else {\n//             combinedData[stream] = [];\n//         }\n//         // 2. Add dynamic data, avoiding duplicates by name\n//         const existingNames = new Set(combinedData[stream].map(c => c.name));\n//         apiColleges.forEach(college => {\n//             if (college.stream === stream && !existingNames.has(college.name)) {\n//                 combinedData[stream].push(college);\n//             }\n//         });\n//         setColleges(combinedData[stream] || []);\n//       } catch (err) {\n//         setError(err.message);\n//         console.error(\"Failed to fetch and merge colleges:\", err);\n//       } finally {\n//         setIsLoading(false);\n//       }\n//     };\n//     fetchAllColleges();\n//   }, [stream]);\n//   const handleApplyClick = (collegeName) => {\n//     navigate('/enrollnow', { state: { collegeName: collegeName } });\n//   };\n//   const handleDetailsClick = (collegeName) => {\n//     const encodedCollegeName = encodeURIComponent(collegeName);\n//     navigate(`/colleges/${stream}/${encodedCollegeName}`);\n//   };\n//   const formatStreamTitle = (slug) => {\n//     if (!slug) return '';\n//     return slug.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n//   };\n//   return (\n//     <div className=\"college-list-container\">\n//       <h1 className=\"college-list-title\">{formatStreamTitle(stream)} Colleges</h1>\n//       {isLoading ? (\n//         <p>Loading colleges...</p>\n//       ) : error ? (\n//         <p>Error: {error}</p>\n//       ) : colleges.length === 0 ? (\n//         <p>No colleges found for this stream.</p>\n//       ) : (\n//         <ul className=\"college-list-ul\">\n//           {colleges.map((college, idx) => (\n//             <li key={college._id || idx} className=\"college-list-item\">\n//               <div className=\"college-info\">\n//                 <span className=\"college-name\">{college.name}</span>\n//                 <span className=\"college-city\">{college.city}</span>\n//               </div>\n//               <div className=\"college-actions\">\n//                 <button\n//                   className=\"btn-details\"\n//                   onClick={() => handleDetailsClick(college.name)}\n//                 >\n//                   Get Details\n//                 </button>\n//                 <button\n//                   className=\"btn-apply\"\n//                   onClick={() => handleApplyClick(college.name)}\n//                 >\n//                   Apply Now\n//                 </button>\n//               </div>\n//             </li>\n//           ))}\n//         </ul>\n//       )}\n//     </div>\n//   );\n// };\n// export default CollegeListPage;\nimport React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";// ✅ REMOVED: The static import of collegedata.js is gone.\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const CollegeListPage=()=>{const{stream}=useParams();const navigate=useNavigate();const[colleges,setColleges]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// ✅ SIMPLIFIED: This function now only fetches from your API.\nconst fetchCollegesByStream=async()=>{try{setIsLoading(true);const response=await fetch('http://localhost:5000/api/colleges');if(!response.ok){throw new Error('Network response was not ok');}const allColleges=await response.json();// Filter the colleges from the database to match the current stream\nconst filteredColleges=allColleges.filter(college=>college.stream===stream);setColleges(filteredColleges);}catch(err){setError(err.message);console.error(\"Failed to fetch and filter colleges:\",err);}finally{setIsLoading(false);}};fetchCollegesByStream();},[stream]);// Re-runs whenever the 'stream' parameter in the URL changes\nconst handleApplyClick=collegeName=>{navigate('/enrollnow',{state:{collegeName:collegeName}});};const handleDetailsClick=collegeName=>{const encodedCollegeName=encodeURIComponent(collegeName);navigate(\"/colleges/\".concat(stream,\"/\").concat(encodedCollegeName));};const formatStreamTitle=slug=>{if(!slug)return'';return slug.replace(/-/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase());};// --- The JSX for rendering the component remains the same ---\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"college-list-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"college-list-title\",children:[formatStreamTitle(stream),\" Colleges\"]}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading colleges...\"}):error?/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]}):colleges.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No colleges found for this stream.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"college-list-ul\",children:colleges.map(college=>/*#__PURE__*/_jsxs(\"li\",{className:\"college-list-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"college-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"college-name\",children:college.name}),/*#__PURE__*/_jsx(\"span\",{className:\"college-city\",children:college.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"college-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-details\",onClick:()=>handleDetailsClick(college.name),children:\"Get Details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-apply\",onClick:()=>handleApplyClick(college.name),children:\"Apply Now\"})]})]},college._id))})]});};export default CollegeListPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","jsxs","_jsxs","jsx","_jsx","CollegeListPage","stream","navigate","colleges","setColleges","isLoading","setIsLoading","error","setError","fetchCollegesByStream","response","fetch","ok","Error","allColleges","json","filteredColleges","filter","college","err","message","console","handleApplyClick","collegeName","state","handleDetailsClick","encodedCollegeName","encodeURIComponent","concat","formatStreamTitle","slug","replace","l","toUpperCase","className","children","length","map","name","city","onClick","_id"],"sources":["D:/CollegeWeb/collegexplorer-app/src/components/CollegeListPage.jsx"],"sourcesContent":["\r\n// import React, { useState, useEffect } from \"react\";\r\n// import { useParams, useNavigate } from \"react-router-dom\";\r\n// import { collegeData as staticCollegeData } from \"../data/collegedata.js\"; // Import static data\r\n\r\n// const CollegeListPage = () => {\r\n//   const { stream } = useParams();\r\n//   const navigate = useNavigate();\r\n\r\n//   // State to hold combined list of colleges\r\n//   const [colleges, setColleges] = useState([]);\r\n//   const [isLoading, setIsLoading] = useState(true);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   useEffect(() => {\r\n//     const fetchAllColleges = async () => {\r\n//       try {\r\n//         setIsLoading(true);\r\n        \r\n//         // --- Fetch from both API and static file ---\r\n//         const apiResponsePromise = fetch('http://localhost:5000/api/colleges');\r\n//         const staticDataPromise = Promise.resolve(staticCollegeData);\r\n\r\n//         const [apiResult, staticResult] = await Promise.allSettled([\r\n//           apiResponsePromise.then(res => {\r\n//             if (!res.ok) throw new Error('Network response was not ok');\r\n//             return res.json();\r\n//           }),\r\n//           staticDataPromise\r\n//         ]);\r\n\r\n//         let apiColleges = [];\r\n//         if (apiResult.status === 'fulfilled') {\r\n//           apiColleges = apiResult.value;\r\n//         } else {\r\n//           console.error(\"Failed to fetch from API:\", apiResult.reason);\r\n//           // You might want to set a partial error state here\r\n//         }\r\n\r\n//         const staticColleges = staticResult.value || {};\r\n        \r\n//         // --- Merge and de-duplicate data ---\r\n//         const combinedData = {};\r\n\r\n//         // 1. Add static data first\r\n//         if (staticColleges[stream]) {\r\n//             combinedData[stream] = [...staticColleges[stream]];\r\n//         } else {\r\n//             combinedData[stream] = [];\r\n//         }\r\n        \r\n//         // 2. Add dynamic data, avoiding duplicates by name\r\n//         const existingNames = new Set(combinedData[stream].map(c => c.name));\r\n//         apiColleges.forEach(college => {\r\n//             if (college.stream === stream && !existingNames.has(college.name)) {\r\n//                 combinedData[stream].push(college);\r\n//             }\r\n//         });\r\n\r\n//         setColleges(combinedData[stream] || []);\r\n\r\n//       } catch (err) {\r\n//         setError(err.message);\r\n//         console.error(\"Failed to fetch and merge colleges:\", err);\r\n//       } finally {\r\n//         setIsLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchAllColleges();\r\n//   }, [stream]);\r\n\r\n//   const handleApplyClick = (collegeName) => {\r\n//     navigate('/enrollnow', { state: { collegeName: collegeName } });\r\n//   };\r\n\r\n//   const handleDetailsClick = (collegeName) => {\r\n//     const encodedCollegeName = encodeURIComponent(collegeName);\r\n//     navigate(`/colleges/${stream}/${encodedCollegeName}`);\r\n//   };\r\n\r\n//   const formatStreamTitle = (slug) => {\r\n//     if (!slug) return '';\r\n//     return slug.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"college-list-container\">\r\n//       <h1 className=\"college-list-title\">{formatStreamTitle(stream)} Colleges</h1>\r\n      \r\n//       {isLoading ? (\r\n//         <p>Loading colleges...</p>\r\n//       ) : error ? (\r\n//         <p>Error: {error}</p>\r\n//       ) : colleges.length === 0 ? (\r\n//         <p>No colleges found for this stream.</p>\r\n//       ) : (\r\n//         <ul className=\"college-list-ul\">\r\n//           {colleges.map((college, idx) => (\r\n//             <li key={college._id || idx} className=\"college-list-item\">\r\n//               <div className=\"college-info\">\r\n//                 <span className=\"college-name\">{college.name}</span>\r\n//                 <span className=\"college-city\">{college.city}</span>\r\n//               </div>\r\n//               <div className=\"college-actions\">\r\n//                 <button\r\n//                   className=\"btn-details\"\r\n//                   onClick={() => handleDetailsClick(college.name)}\r\n//                 >\r\n//                   Get Details\r\n//                 </button>\r\n//                 <button\r\n//                   className=\"btn-apply\"\r\n//                   onClick={() => handleApplyClick(college.name)}\r\n//                 >\r\n//                   Apply Now\r\n//                 </button>\r\n//               </div>\r\n//             </li>\r\n//           ))}\r\n//         </ul>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default CollegeListPage;\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\n\r\n// ✅ REMOVED: The static import of collegedata.js is gone.\r\n\r\nconst CollegeListPage = () => {\r\n  const { stream } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [colleges, setColleges] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // ✅ SIMPLIFIED: This function now only fetches from your API.\r\n    const fetchCollegesByStream = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const response = await fetch('http://localhost:5000/api/colleges');\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n\r\n        const allColleges = await response.json();\r\n\r\n        // Filter the colleges from the database to match the current stream\r\n        const filteredColleges = allColleges.filter(college => college.stream === stream);\r\n\r\n        setColleges(filteredColleges);\r\n      } catch (err) {\r\n        setError(err.message);\r\n        console.error(\"Failed to fetch and filter colleges:\", err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCollegesByStream();\r\n  }, [stream]); // Re-runs whenever the 'stream' parameter in the URL changes\r\n\r\n  const handleApplyClick = (collegeName) => {\r\n    navigate('/enrollnow', { state: { collegeName: collegeName } });\r\n  };\r\n\r\n  const handleDetailsClick = (collegeName) => {\r\n    const encodedCollegeName = encodeURIComponent(collegeName);\r\n    navigate(`/colleges/${stream}/${encodedCollegeName}`);\r\n  };\r\n\r\n  const formatStreamTitle = (slug) => {\r\n    if (!slug) return '';\r\n    return slug.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\r\n  };\r\n\r\n  // --- The JSX for rendering the component remains the same ---\r\n  return (\r\n    <div className=\"college-list-container\">\r\n      <h1 className=\"college-list-title\">{formatStreamTitle(stream)} Colleges</h1>\r\n      \r\n      {isLoading ? (\r\n        <p>Loading colleges...</p>\r\n      ) : error ? (\r\n        <p>Error: {error}</p>\r\n      ) : colleges.length === 0 ? (\r\n        <p>No colleges found for this stream.</p>\r\n      ) : (\r\n        <ul className=\"college-list-ul\">\r\n          {colleges.map((college) => (\r\n            <li key={college._id} className=\"college-list-item\">\r\n              <div className=\"college-info\">\r\n                <span className=\"college-name\">{college.name}</span>\r\n                <span className=\"college-city\">{college.city}</span>\r\n              </div>\r\n              <div className=\"college-actions\">\r\n                <button\r\n                  className=\"btn-details\"\r\n                  onClick={() => handleDetailsClick(college.name)}\r\n                >\r\n                  Get Details\r\n                </button>\r\n                <button\r\n                  className=\"btn-apply\"\r\n                  onClick={() => handleApplyClick(college.name)}\r\n                >\r\n                  Apply Now\r\n                </button>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollegeListPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}